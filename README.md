# SymTuner Data Virtual Machine
This virtual machine (VM) contains the raw experimental data used in the paper "SymTuner: Maximizing the Power of Symbolic Execution by Adaptively Tuning External Parameters". 
SymTuner is a novel technique to automatically tune external parametes of symbolic execution.
This virtual machine contains all the settings to reproduce the main experimental results in the paper (Figure 3 and Table 3).

## Download
You can download VM for SymTuner from [https://www.dropbox.com/s/9ci636rl05sre24/SymTuner.ova?dl=0]
VM requires (VirtualBox)[https://www.virtualbox.org/] and the VM is constructed with configuration of 4 cores, 8GB of memory, and 30GB (at most 200GB) of space.

## Contents
This VM contains the raw experimental data (log data and testcases generated by KLEE with various experiment settings) and processed experimental data (covered branches and bugs) in the directory `~/symtuner/experiments`.
The scripts to generate the results in the paper are stored in `~/symtuner/script`.
*If you need privileged authority, the password for the user `anonymous` is `123`.*

## Reproducing Experimental Results
**Note**: The environment used to produce the results in the paper and that of the constructed VM are not exactly the same, which may produce slightly different results from ours in the paper.

### Reproducing Figure 3
The first step to reproduce the results in Figure 3 is calculating the covered branches from the KLEE testcases.
Since this process takes a lot of time, we have calcualted and stored the data in each experiment directory beforehand.
If you want to calculate them from scrath, please see [this section](#raw-data-processing) first.

Figure 3 reports the branch coverages over time.
You first copy all the result files to one directory, and run the `graph.py` script to draw graphs.
The following commands will copy result files into `~/symtuner/experiments/figure3_data` and draw graphs:
```bash
~$ cd ~/symtuner/script
symtuner/script$ mkdir -p ../experiments/figure3_data
symtuner/script$ cp ../experiments/result_*/*__result* ../experiments/figure3_data/
symtuner/script$ python3 graph.py ../experiments/figure3_data 4
SymTuner(gcal): 3538.75
RandTuner(gcal):3186.25
...
```
You can find the `.pdf` files with graph in `~/symtuner`.

### Reproducing Table 3
The first step to reproduce the result in Table 3 is to find and reproduce the bugs from the KLEE testcases.
As in the (previous section)[#reproducing-figure-3], we found and store all the results beforehand.
If you want to do it from scratch, please see [this section](#raw-data-processing) first.

Table 3 reports the actual bugs found by each tool.
The following command will show you the table in your prompt:
```bash
~$ cd ~/symtuner/script
symtuner/script$ python3 table.py
============ gawk ============
                          SymTuner RandTuner KLEE_hand_short KLEE_hand_long KLEE_default_short KLEE_default_long
bug
../main.c:1337 (signal 6)    O (6)     O (7)               X              X                  X                 X
...
```

### Raw Data Processing
We provide a script `data_gen.py` to help you calculate the coverage and bugs from raw data using `gcov` and `klee-replay`.
For example, the following command will calculate the covered branches and bugs from the first experiment (out of 4) of KLEE+SymTuner:
```bash
~$ cd symtuner/script
symtuner/script$ python data_gen.py pgm/gcal1.json gcal 1 SymTuner
```
The detailed descriptions of the arguments are as follows:
| Argument         | Descriptions                                                                                                                                                      |
|:----------------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `pgm/gcal1.json` | The setting for each experiment. See files in `~/symtuner/script/pgm`.                                                                                            |
| `gcal`           | Target benchmark. The available options are `combile`, `du`, `diff`, `enscript`, `gawk`, `gcal`, `grep`, `ls`, `nano`, `sed`, `trueprint`, and `xorriso`          |
| `1`              | The id of experiment. The id is numbered for each benchmark and tool and it is a integer between 1 and 4                                                          |
| `SymTuner`       | The tool used for experiment. The avaiable options are `SymTuner`, `RandTuner`, `vanillaKLEE_long`, `vanillaKLEE_short`, `defaultKLEE_long`, `defaultKLEE_short`. |

Note that, `vanillaKLEE` and `defaultKLEE` mean `KLEE_hand` and `KLEE_default` in the paper, respectivly.
